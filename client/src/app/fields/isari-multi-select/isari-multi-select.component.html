<div class="mat-form-field-wrapper mat-form-field-can-float mat-form-field-appearance-legacy" [class.mat-form-field-should-float]="!empty"
  (keyup)="onKey($event)">
  <div class="multiselect-container">

    <div [ngClass]="{'md-empty': empty }" style="flex-grow: 1">

      <input #search *ngIf="!disabled" class="mat-input-element" spellcheck="false" type="text" [formControl]="selectControl" (focus)="onFocus($event)"
        (blur)="onBlur($event)">
      <span class="mat-form-field-label-wrapper">
        <label class="mat-form-field-label" [ngClass]="{'mat-form-field-empty': empty }">{{ label }}</label>
        <label class="mat-form-field-label mat-form-field-empty" *ngIf="!empty && !disabled">{{ altLabel }}</label>
      </span>
      <div class="mat-menu" [hidden]="!focused">
        <button [ngClass]="{active: currentIndex === i}" *ngFor="let entry of options;let i = index" mat-button style="width:100%;display:flex;"
          (mousedown)="onSelect(i)">
          {{ entry.label }}
        </button>

        <div *ngIf="allOptions.length > max" style="display:flex;justify-content:space-between;">
          <button mat-button color="primary" (mousedown)="paginate(-1)" [disabled]="skip === 0">
            <mat-icon>navigate_before</mat-icon>
          </button>
          <button mat-button color="primary" (mousedown)="paginate(+1)" [disabled]="skip + options.length >= allOptions.length">
            <mat-icon>navigate_next</mat-icon>
          </button>
        </div>

        <button mat-button color="primary" *ngIf="extend" (mousedown)="createValue()">
          {{ 'btn_create_value' | translate }}
        </button>
      </div>

    </div>

    <div style="flex-grow: 2">
      <div *ngFor="let item of _values" class="multiselect-tag" [class.edit]="item.id" style="display:inline-block">
        {{ item.label }}
        <a *ngIf="item.id && !disabled" routerLink="/{{ api }}/{{ item.id }}" target="_blank" queryParamsHandling="preserve">
          <mat-icon>open_in_new</mat-icon>
        </a>
        <mat-icon *ngIf="!disabled" (click)="removeValue(item, $event)" style="vertical-align: middle;">delete</mat-icon>
      </div>
    </div>

    <div style="flex-grow: 1;text-align: right;">
      <span *ngIf="requirement === 'recommended' && !_values.length" class="recommended-field">{{ 'recommended' | translate }}</span>
      <mat-icon class="tooltip-fields" *ngIf="description" [matTooltip]="description">info_outline</mat-icon>
      <mat-icon class="tooltip-fields" [matTooltip]="'multiplechoices' | translate ">info_outline</mat-icon>
    </div>

  </div>
  <div class="mat-form-field-underline" [class.md-disabled]="disabled">
    <span class="mat-form-field-ripple"></span>
  </div>
</div>