<span [formGroup]="form">

  <span *ngIf="!field.multiple" [ngSwitch]="field.controlType">

    <div *ngSwitchCase="'object'">
      <isari-data-editor
        (onDelete)="remove($event)"
        (onUpdate)="update($event)"
        [path]="path + (multiple ? '' : '.' + field.name)"
        [deletable]="index !== null"
        [label]="field.label"
        [form]="getForm()"
        [feature]="feature"
        [layout]="field.layout"></isari-data-editor>
    </div>

    <isari-date *ngSwitchCase="'date'"
      (onUpdate)="update($event)"
      [name]="field.name"
      [label]="field.label"
      [description]="field.description"
      [form]="form"></isari-date>

    <isari-select *ngSwitchCase="'select'"
      (onUpdate)="update($event)"
      [src]="field.src"
      [stringValue]="field.stringValue"
      [extensible]="!!field.softenum || !!field.ref"
      [create]="field.create"
      [api]="field.api"
      [name]="field.name"
      [label]="field.label"
      [description]="field.description"
      [form]="form"></isari-select>

    <isari-checkbox *ngSwitchCase="'boolean'"
      (onUpdate)="update($event)"
      [name]="field.name"
      [label]="field.label"
      [description]="field.description"
      [form]="form"></isari-checkbox>

    <isari-textarea *ngSwitchCase="'text'"
      (onUpdate)="update($event)"
      [name]="field.name"
      [label]="field.label"
      [description]="field.description"
      [form]="form"></isari-textarea>

    <isari-input *ngSwitchDefault
      (onUpdate)="update($event)"
      [name]="field.name"
      [label]="field.label"
      [description]="field.description"
      [form]="form"></isari-input>

  </span>

  <span *ngIf="field.multiple && field.type !== 'object'" [ngSwitch]="field.controlType">

    <isari-multi-select *ngSwitchCase="'select'"
      (onUpdate)="update($event)"
      [src]="field.src"
      [stringValue]="field.stringValue"
      [extensible]="!!field.softenum || !!field.ref"
      [create]="field.create"
      [api]="field.api"
      [name]="field.name"
      [label]="field.label"
      [description]="field.description"
      [form]="form"></isari-multi-select>

    <isari-multi-input *ngSwitchDefault
      (onUpdate)="update($event)"
      [name]="field.name"
      [label]="field.label"
      [description]="field.description"
      [form]="form"></isari-multi-input>
  </span>

  <span *ngIf="field.multiple && field.type === 'object' && form.enabled" [formArrayName]="field.name">
    <md-card-subtitle>
      <a class="add" href (click)="add($event)" color="warn"><md-icon>add_circle_outline</md-icon> {{ field.label }}</a>
    </md-card-subtitle>
    <isari-field *ngFor="let ctrl of form.controls[field.name].controls;let i = index"
      (onUpdate)="update($event)"
      [feature]="feature"
      [index]="i"
      [form]="form"
      [path]="path + '.' + i"
      [multiple]="true"
      [field]="getField(field)"></isari-field>
    
  </span>

</span>
