<!-- <md-card>
  <isari-chart [feature]="feature" [data]="filteredData"></isari-chart>
</md-card> -->
<md-card>
  <md-toolbar [color]="primary">

    <span>{{ feature | translate }}</span>
    &nbsp;

    <button *ngIf="feature === 'people'" md-raised-button [md-menu-trigger-for]="menuPeople">{{ (externals ? 'others' : 'members') | translate }}</button>
    <md-menu #menuPeople="mdMenu">
      <a md-menu-item [routerLink]="['/', feature]" preserveQueryParams>{{ 'members' | translate }}</a>
      <a md-menu-item [routerLink]="[{ externals: true }]" preserveQueryParams>{{ 'others' | translate }}</a>
    </md-menu>

    <button *ngIf="feature === 'activities' && activityTypes.length" md-raised-button [md-menu-trigger-for]="menuActivities">{{ (!activityType) ? ('all_activities' | translate) : (activityTypeLabel) }}</button>
    <md-menu #menuActivities="mdMenu">
      <a md-menu-item [routerLink]="['/', feature]" preserveQueryParams>{{ 'all_activities' | translate }}</a>
      <a *ngFor="let type of activityTypes" md-menu-item [routerLink]="[{type: type.value}]" preserveQueryParams>{{ type.label.fr }}</a>
    </md-menu>

    <isari-date
      *ngIf="(feature === 'people' && !externals) || feature === 'activities'"
      (onUpdate)="startDateUpdated($event)"
      [form]="dateForm"
      [name]="'startDate'"
      [label]="translate.instant('startDate')"
      [requirement]="false"></isari-date>

    <isari-date
      *ngIf="(feature === 'people' && !externals) || feature === 'activities'"
      (onUpdate)="endDateUpdated($event)"
      [form]="dateForm"
      [name]="'endDate'"
      [label]="translate.instant('endDate')"
      [requirement]="false"></isari-date>

    <span class="filer"></span>

    <isari-download-button [feature]="feature" [data]="filteredData" [selectedColumns]="selectedColumns"></isari-download-button>
    <isari-cols-selector [cols]="cols" [selectedColumns]="selectedColumns" (onColSeleted)="colSelected($event)"></isari-cols-selector>
    <button *ngIf="canCreate" md-raised-button [disableRipple]="true" (click)="createObject()">
      {{ ('btn_add_' + feature) | translate }}
    </button>

    <button md-icon-button (click)="refresh()">
      <md-icon>refresh</md-icon>
    </button>

  </md-toolbar>

  <isari-spinner *ngIf="loading"></isari-spinner>

  <isari-data-table *ngIf="!loading" (onFilter)="filtered($event)" [data]="data" [cols]="selectedColumns" [editedId]="editedId" [feature]="feature"></isari-data-table>
</md-card>

<router-outlet name="editor"></router-outlet>

